<div class="w-full mx-auto p-6 bg-white rounded shadow space-y-6">
  <!-- Header -->
  <div class="flex items-center justify-between">
    <h2 class="text-2xl font-bold">
      {{ isEdit ? 'Edit' : 'Create' }} Lesson
    </h2>
  </div>

  <!-- Form -->
  <form [formGroup]="form" (ngSubmit)="onSubmit()" class="space-y-6">

    <!-- Title -->
    <div>
      <label class="block font-semibold mb-1">Title</label>
      <input class="border p-2 w-full rounded" placeholder="Title" formControlName="title" />
      <div class="text-sm text-red-600 mt-1" *ngIf="f['title'].touched && f['title'].errors">
        <span *ngIf="f['title'].errors['required']">Title is required.</span>
        <span *ngIf="f['title'].errors['maxlength']">Max {{ MAX_TITLE }} characters.</span>
      </div>
    </div>

    <!-- Short Description -->
    <div>
      <label class="block font-semibold mb-1">Short Description</label>
      <input class="border p-2 w-full rounded" placeholder="Short Description" formControlName="shortDescription" />
      <div class="text-sm text-red-600 mt-1" *ngIf="f['shortDescription'].touched && f['shortDescription'].errors">
        <span *ngIf="f['shortDescription'].errors['required']">Short description is required.</span>
        <span *ngIf="f['shortDescription'].errors['maxlength']">Max {{ MAX_SHORT }} characters.</span>
      </div>
      <div class="text-sm text-gray-500 mt-1">
        A brief summary shown in lists and previews.
      </div>
    </div>

    <!-- Description (Quill) -->
    <div>
      <label class="block font-semibold mb-1">Description</label>
      <quill-editor formControlName="description" [modules]="modules" [styles]="{ height: '500px' }" theme="snow"
        class="custom-quill-wrapper bg-white">
      </quill-editor>
      <div class="text-sm text-red-600 mt-1" *ngIf="f['description'].touched && f['description'].errors">
        Description is required.
      </div>
    </div>

    <!-- Show an error if any -->
<p *ngIf="loadError()" class="text-red-600 text-sm mb-3">
  {{ loadError() }}
</p>

<!-- Hidden binding so form keeps current URL when editing -->
<input type="hidden" formControlName="documentUrl" />

<div class="mt-4">
  <label class="block text-sm font-medium text-gray-700">Lesson Document (PDF)</label>

  <div class="mt-2 flex items-center gap-3">
    <input
      type="file"
      (change)="onDocSelected($event)"
      accept=".pdf,application/pdf"
      [disabled]="saving()"
      class="block w-full text-sm text-gray-700 file:mr-4 file:py-2 file:px-4
           file:rounded file:border-0 file:text-sm file:font-semibold
           file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100" />

    <span *ngIf="selectedDoc" class="text-sm text-gray-600">
      Selected: {{ selectedDoc.name }}
    </span>
  </div>

  <!-- existing document link -->
  <div class="mt-2 flex items-center gap-4" *ngIf="f['documentUrl'].value">
    <a
      [href]="f['documentUrl'].value"
      target="_blank"
      rel="noopener"
      class="text-blue-600 underline"
    >View current document</a>

    <button
      type="button"
      (click)="clearDocumentUrl()"
      class="text-sm text-gray-600 hover:text-gray-800"
      [disabled]="saving()"
    >
      Remove link
    </button>
  </div>

  <p class="mt-1 text-xs text-gray-500">
    Only PDF up to {{ MAX_DOC_MB }} MB.
  </p>
</div>

<!-- Your other form fields remain unchanged -->

    <!-- Soft delete -->
    <!-- <div class="flex items-center gap-2">
      <input type="checkbox" formControlName="isDeleted" />
      <span class="text-sm text-gray-700">Soft delete (hide lesson)</span>
    </div> -->

    <!-- Submit -->
    <div class="pt-2">
      <button type="submit" [disabled]="form.invalid || saving()"
        class="bg-blue-600 hover:bg-blue-700 disabled:opacity-60 text-white px-4 py-2 rounded">
        <span *ngIf="!isEdit">Create Lesson</span>
        <span *ngIf="isEdit">Update Lesson</span>
      </button>
    </div>

  </form>
</div>