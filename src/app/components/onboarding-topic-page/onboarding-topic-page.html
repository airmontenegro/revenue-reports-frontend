<div class="relative w-full mx-auto max-w-7xl p-6">

  <!-- HERO with topic image -->
  <section class="relative mb-6">
    <div class="relative h-56 sm:h-64 md:h-72 w-full overflow-hidden rounded-xl shadow">
      <!-- Background image (or fallback gradient) -->
      <img *ngIf="topic?.imageUrl; else heroFallback" [src]="topic!.imageUrl!" [alt]="topic?.name || 'Topic image'"
        class="absolute inset-0 w-full h-full object-cover" />
      <ng-template #heroFallback>
        <div class="absolute inset-0 bg-gradient-to-br from-slate-200 to-slate-300"></div>
      </ng-template>

      <!-- Dark overlay for readability -->
      <div class="absolute inset-0 bg-black/35"></div>

      <!-- Hero content -->
      <div class="relative h-full flex flex-col items-center justify-center text-center px-4">
        <h1 class="text-3xl font-bold text-white drop-shadow">
          {{ topic?.name || 'Topic' }}
        </h1>
        <p class="mt-2 text-white/90" *ngIf="topic?.shortDescription">
          {{ topic?.shortDescription }}
        </p>
        <div class="mt-3" *ngIf="topic?.documentUrl">
          <a [href]="topic!.documentUrl!" target="_blank" rel="noopener"
            class="text-white underline decoration-white/70 hover:decoration-white">
            Download consent PDF
          </a>
        </div>
      </div>
    </div>
  </section>

  <!-- Error / Loading -->
  <div *ngIf="error" class="text-red-600 mb-4 text-center">{{ error }}</div>
  <div *ngIf="loading" class="text-center text-gray-400">Loadingâ€¦</div>

  <!-- Layout -->
  <div *ngIf="!loading && !error" class="flex gap-6">
    <!-- Sidebar -->
    <aside class="w-64 shrink-0">
      <div class="bg-white border rounded-xl shadow">
        <div class="px-4 py-3 border-b font-semibold ">Teme iz ove oblasti</div>
        <nav class="p-2 space-y-1" *ngIf="lessons.length; else noLessons">
          <a *ngFor="let l of lessons; trackBy: trackByLesson" [routerLink]="['./lesson', l.id]"
            routerLinkActive="bg-blue-50 border-blue-300" [class]="
              'block px-3 py-2 rounded border hover:bg-gray-50 transition ' +
              (isActive(l.id) ? 'bg-blue-50 border-blue-300' : 'border-transparent')
            ">
            <div class="font-medium text-gray-900 truncate">{{ l.title }}</div>
          </a>
        </nav>
        <ng-template #noLessons>
          <div class="p-4 text-sm text-gray-500">No lessons in this topic yet.</div>
        </ng-template>
      </div>
    </aside>

    <!-- Main content (lesson outlet) -->
    <main class="flex-1 min-w-0">
      <div class="bg-white rounded-xl border shadow p-4 overflow-hidden">
        <router-outlet></router-outlet>
      </div>
    </main>
  </div>
</div>